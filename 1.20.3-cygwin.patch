--- origsrc/SDL_perl-1.20.3/Makefile.PL	2003-03-27 04:17:23.000000000 -0600
+++ src/SDL_perl-1.20.3/Makefile.PL	2008-03-11 06:46:46.218750000 -0500
@@ -7,6 +7,7 @@
 %OS = (
 	linux 	=> "Makefile.linux",
 	win32 	=> "Makefile.win32",
+	cygwin	=> "Makefile.cygwin",
 	freebsd => "Makefile.freebsd",
 );
 
--- origsrc/SDL_perl-1.20.3/Makefile.cygwin	1969-12-31 18:00:00.000000000 -0600
+++ src/SDL_perl-1.20.3/Makefile.cygwin	2008-03-11 06:47:47.562500000 -0500
@@ -0,0 +1,136 @@
+#!/usr/bin/env perl 
+
+use strict;
+use ExtUtils::MakeMaker;
+use Getopt::Long;
+use Config;
+
+#
+# Configure SDL proper
+#
+
+use vars qw/ $sdl_cflags $sdl_libs @dirs $inc_flags %ext @defs /;
+
+#
+# Configuration detection of Linux / Unix
+#
+
+$sdl_cflags = `sdl-config --cflags`;
+chomp($sdl_cflags);
+$sdl_libs = `sdl-config --libs`;
+
+#
+# Search paths
+#
+
+@dirs=(
+	'/usr/include/GL',
+	'/usr/include/SDL',
+	'/usr/include/smpeg',
+	'/usr/include/SDL_console',
+	'/usr/include',
+);
+
+# Tels: debug off for normal builds:
+# $inc_flags = "-ggdb " . $ENV{DEBUG};
+$inc_flags = $ENV{DEBUG};
+
+#
+# Registed extensions
+#
+
+%ext = ( 
+	SDL_image => { inc => 'HAVE_SDL_IMAGE', test => 'SDL_image.h' },
+	SDL_mixer => { inc => 'HAVE_SDL_MIXER', test => 'SDL_mixer.h' },
+	SDL_net => { inc => 'HAVE_SDL_NET', test => 'SDL_net.h' },
+	SDL_ttf => { inc => 'HAVE_SDL_TTF', test => 'SDL_ttf.h' },
+	SDL_gfx => { inc => 'HAVE_SDL_GFX', test => 'SDL_gfxPrimitives.h' },
+	SDL_console => { inc => 'HAVE_SDL_CONSOLE', test => 'CON_console.h' },
+	png => { inc => 'HAVE_PNG', test => 'png.h' },
+	jpeg => { inc => 'HAVE_JPEG', test => 'jpeglib.h' },
+	smpeg => { inc => 'HAVE_SMPEG', test => 'smpeg.h' },
+	GL => { inc => 'HAVE_GL', test => 'gl.h' },
+	GLU => { inc => 'HAVE_GLU', test => 'glu.h' },
+);
+
+
+#
+# Locate optional packages
+#
+
+my ($e,$d);
+for $e ( keys %ext ) {
+	for $d (@dirs) {
+		$ext{$e}{exists} ||= -e "$d/$ext{$e}{test}" 
+	}
+}
+
+my $usage;
+for $e ( keys %ext ) {
+	$usage .= "\n\t-$e disables $e support";
+}
+
+for $e ( @ARGV ) {
+	my $o;
+	($o = $e) =~ s/^-*//g;
+	if (exists $ext{$o}) {
+		print "Disabling $o\n";
+		$ext{$o}{exists} = 0;
+	}
+}
+	
+sub found_mod {
+	printf "%-24s%s\n", "Enabled $_[0]",  ( $_[1] ? "yes" : "no" );
+}
+
+for $e ( sort keys %ext ) {
+	found_mod ($e,$ext{$e}{exists});
+}
+
+#
+# Get GLU version
+#
+
+if  ( $ext{GLU}{exists} ) {
+	print "Detecting GLU Version\n";
+	system ("gcc -o detect detect.c -lGLU -lGL $sdl_libs");
+	my $version = `./detect` * 10;
+	push @defs, "-DHAVE_GLU_VERSION=$version";
+	system ("rm detect");
+}
+
+#
+# Test For thread support
+#
+
+if ( $Config{usethreads} ) {
+	push @defs, "-DUSE_THREADS";
+}
+
+#
+# Specify Makefile options
+#
+
+my %options = (
+    'NAME'	=> 'SDL_perl',
+    'VERSION_FROM' => 'lib/SDL.pm', 
+    'LIBS'	=> [ join( " ",	"$sdl_libs", 
+			map { $ext{$_}{exists} ? "-l$_" : '' } (sort keys %ext),
+			)
+		],  
+    'DEFINE'	=> join ( " ", @defs, map { $ext{$_}{exists} ? "-D$ext{$_}{inc}" : '' } sort keys %ext),
+    'INC'	=> "$inc_flags $sdl_cflags " . join(" ", map { "-I$_" } @dirs),
+    'OBJECT'	=> (	
+			 ($ext{SDL_image}{exists} ? 'SFont.o ' : "") .
+			 'SDL_perl.o ' .
+			 ($ext{GL}{exists} ? 'OpenGL.o ' : "") 
+		),
+);
+    
+#
+# Write Makefile 
+#
+
+WriteMakefile(%options );
+
+
--- origsrc/SDL_perl-1.20.3/SDL_perl.xs	2003-03-27 04:17:23.000000000 -0600
+++ src/SDL_perl-1.20.3/SDL_perl.xs	2008-03-11 06:46:46.234375000 -0500
@@ -75,7 +75,6 @@
 
 #ifdef HAVE_SDL_CONSOLE
 #include "CON_console.h"
-#include "CON_consolecommands.h"
 #include "DT_drawtext.h"
 #endif
 
@@ -3732,6 +3731,8 @@
 OUTPUT:
      RETVAL
 
+
+#ifndef __CYGWIN__
 int
 GFXFilledpieColor ( dst, x, y, rad, start, end, color )
     SDL_Surface* dst;
@@ -3763,6 +3764,8 @@
 OUTPUT:
      RETVAL
 
+#endif
+
 int
 GFXPolygonColor ( dst, vx, vy, n, color )
     SDL_Surface* dst;
